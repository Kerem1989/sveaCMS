<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Articles List</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
<div class="flex min-h-screen">
  <!-- Sidebar -->
  <div class="w-64 bg-gray-800 text-white hidden sm:flex flex-col p-6 space-y-6">
    <div class="flex items-center space-x-2">
      <span class="text-2xl font-bold">SveaCMS</span>
    </div>
    <nav class="space-y-2">
      <a href="/articles" class="flex items-center text-sm text-white hover:text-cyan-400">
        <img src="https://i.ibb.co/DPWYSdX6/application.png" alt="Articles Icon" class="w-5 h-5 mr-2 filter brightness-[2.5]" onerror="this.style.display='none'">
        Articles
      </a>
    </nav>
  </div>

  <!-- Main Content -->
  <main class="flex-1 p-6">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">Articles Overview</h1>
      <button onclick="document.getElementById('createDialog').showModal()" class="bg-cyan-600 text-white px-4 py-2 rounded-lg hover:bg-cyan-700">New Article</button>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full bg-white rounded-lg shadow divide-y divide-gray-200">
        <thead class="bg-gray-50">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Slug</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tags</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Image</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Published</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
        </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
        <tr th:each="article : ${listArticles}">
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" th:text="${article.title}">Title</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600" th:text="${article.slug}">slug</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600" th:text="${article.description}">description</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
            <span th:each="tag : ${article.tags}" th:text="${tag}" class="inline-block bg-cyan-100 text-cyan-800 text-xs px-2 py-0.5 rounded mr-1">Tag</span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm">
            <img th:src="${article.imageUrl}" alt="Thumbnail" class="w-16 h-10 object-cover rounded"/>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600" th:text="${#temporals.format(article.publishedAt, 'yyyy-MM-dd HH:mm')}">Date</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm flex space-x-2">
            <button class="text-blue-600 hover:text-blue-900" aria-label="Edit">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M17.414 2.586a2 2 0 010 2.828L8.828 14H6v-2.828l8.586-8.586a2 2 0 012.828 0z"/>
                <path fill-rule="evenodd" d="M5 13.828V16h2.172l9.586-9.586-2.172-2.172L5 13.828zM3 17a1 1 0 001 1h12a1 1 0 001-1v-4a1 1 0 10-2 0v3H4v-3a1 1 0 10-2 0v4z" clip-rule="evenodd"/>
              </svg>
            </button>
            <button class="text-red-600 hover:text-red-900" aria-label="Delete">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M6 4a1 1 0 011-1h6a1 1 0 011 1v1h5a1 1 0 110 2h-1v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7H2a1 1 0 110-2h5V4zm2 3a1 1 0 00-2 0v8a1 1 0 002 0V7zm4 0a1 1 0 00-2 0v8a1 1 0 002 0V7z" clip-rule="evenodd"/>
              </svg>
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </main>
  <script>
    document.getElementById("newArticleBtn").addEventListener("click", async () => {
      const response = await fetch("/create-article-html");
      const html = await response.text();
      document.getElementById("dialogContent").innerHTML = html;
      document.getElementById("createDialog").showModal();
    });
  </script>
</div>
</body>
</html>
